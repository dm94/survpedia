---
import Layout from "@layouts/Layout.astro";
import { getCollection } from "astro:content";
import { useTranslations } from "@i18n/utils";
import Card from "@components/Card.astro";

export function getStaticPaths() {
  return [{ params: { lang: "es" } }, { params: { lang: "en" } }];
}

const { lang } = Astro.params;
const t = useTranslations(lang as any);

const knowledge = await getCollection("knowledge", ({ id }) => {
  return id.startsWith(`${lang}/`);
});
---

<Layout title={t("knowledge.title")} description={t("knowledge.desc")}>
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-slate-900 dark:text-white mb-2">
      {t("knowledge.title")}
    </h1>
    <p class="text-slate-600 dark:text-slate-400">
      {t("knowledge.desc")}
    </p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {
      knowledge.map(entry => {
        const slugPart = entry.slug.split("/")[1];
        return (
          <Card
            title={entry.data.title}
            href={`/${lang}/knowledge/${slugPart}`}
            image={entry.data.image}
          />
        );
      })
    }
  </div>
</Layout>
